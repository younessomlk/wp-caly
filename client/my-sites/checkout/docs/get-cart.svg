<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="703px" preserveAspectRatio="none" style="width:1264px;height:703px;" version="1.1" viewBox="0 0 1264 703" width="1264px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kveo7lbhjnd1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F7DCC6" height="688.1875" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="9" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="12" x="71.5" y="16.5684">""</text><rect fill="#F5E6B3" height="688.1875" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="251" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="295" y="16.5684">Calypso</text><rect fill="#B8E6BF" height="688.1875" style="stroke: #A80036; stroke-width: 1.0;" width="833" x="404" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="751.5" y="16.5684">Composite Checkout</text><rect fill="#FFFFFF" filter="url(#f1kveo7lbhjnd1)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="74.5" y="301.2832"/><rect fill="#FFFFFF" filter="url(#f1kveo7lbhjnd1)" height="57.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="271.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="79" x2="79" y1="58.7988" y2="653.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="321" x2="321" y1="58.7988" y2="653.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="517" x2="517" y1="58.7988" y2="653.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="739" x2="739" y1="58.7988" y2="653.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="936" x2="936" y1="58.7988" y2="653.6992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1131" x2="1131" y1="58.7988" y2="653.6992"/><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="18" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="25" y="43.8457">WordPress.com</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="18" y="652.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="25" y="673.2344">WordPress.com</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="260" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="267" y="43.8457">Undocumented</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="260" y="652.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="267" y="673.2344">Undocumented</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="413" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="190" x="420" y="43.8457">useInitializeCartFromServer</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="413" y="652.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="190" x="420" y="673.2344">useInitializeCartFromServer</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="641" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="648" y="43.8457">useShoppingCartManager</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="641" y="652.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="648" y="673.2344">useShoppingCartManager</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="858" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="865" y="43.8457">CompositeCheckout</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="858" y="652.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="865" y="673.2344">CompositeCheckout</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="1035" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="1042" y="43.8457">useShoppingCartReducer</text><rect fill="#FEFECE" filter="url(#f1kveo7lbhjnd1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="1035" y="652.6992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="1042" y="673.2344">useShoppingCartReducer</text><rect fill="#FFFFFF" filter="url(#f1kveo7lbhjnd1)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="74.5" y="301.2832"/><rect fill="#FFFFFF" filter="url(#f1kveo7lbhjnd1)" height="57.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="271.9727"/><polygon fill="#A80036" points="924.5,86.1094,934.5,90.1094,924.5,94.1094,928.5,90.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321.5" x2="930.5" y1="90.1094" y2="90.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="328.5" y="85.3672">import getCart</text><path d="M857,103.1094 L857,143.1094 L1012,143.1094 L1012,113.1094 L1002,103.1094 L857,103.1094 " fill="#FBFB77" filter="url(#f1kveo7lbhjnd1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1002,103.1094 L1002,113.1094 L1012,113.1094 L1002,103.1094 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="863" y="120.6777">getCart from props</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="863" y="135.9883">or fall back to import</text><polygon fill="#A80036" points="750.5,170.041,740.5,174.041,750.5,178.041,746.5,174.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744.5" x2="935.5" y1="174.041" y2="174.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="756.5" y="169.2988">cartKey, getCart</text><path d="M648,187.041 L648,212.041 L826,212.041 L826,197.041 L816,187.041 L648,187.041 " fill="#FBFB77" filter="url(#f1kveo7lbhjnd1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M816,187.041 L816,197.041 L826,197.041 L816,187.041 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="654" y="204.6094">getCart bound to cartKey</text><polygon fill="#A80036" points="528,238.6621,518,242.6621,528,246.6621,524,242.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="522" x2="738.5" y1="242.6621" y2="242.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="534" y="237.9199">getCart</text><polygon fill="#A80036" points="337.5,267.9727,327.5,271.9727,337.5,275.9727,333.5,271.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="331.5" x2="516" y1="271.9727" y2="271.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="343.5" y="267.2305">&lt;&lt; getCart &gt;&gt;</text><polygon fill="#A80036" points="95.5,297.2832,85.5,301.2832,95.5,305.2832,91.5,301.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89.5" x2="315.5" y1="301.2832" y2="301.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="101.5" y="296.541">GET /me/shopping-cart/{cartKey}</text><polygon fill="#A80036" points="304.5,311.2832,314.5,315.2832,304.5,319.2832,308.5,315.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79.5" x2="310.5" y1="315.2832" y2="315.2832"/><polygon fill="#A80036" points="505,325.2832,515,329.2832,505,333.2832,509,329.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="321.5" x2="511" y1="329.2832" y2="329.2832"/><polygon fill="#A80036" points="1119.5,354.5938,1129.5,358.5938,1119.5,362.5938,1123.5,358.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517" x2="1125.5" y1="358.5938" y2="358.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="524" y="353.8516">dispatch RECEIVE_INITIAL_RESPONSE_CART</text><path d="M415,371.5938 L415,396.5938 L614,396.5938 L614,381.5938 L604,371.5938 L415,371.5938 " fill="#FBFB77" filter="url(#f1kveo7lbhjnd1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M604,371.5938 L604,381.5938 L614,381.5938 L604,371.5938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="421" y="389.1621">event CART_INIT_COMPLETE</text><path d="M1006,410.9043 L1006,465.9043 L1252,465.9043 L1252,420.9043 L1242,410.9043 L1006,410.9043 " fill="#FBFB77" filter="url(#f1kveo7lbhjnd1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1242,410.9043 L1242,420.9043 L1252,420.9043 L1242,410.9043 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="1012" y="428.4727">Moves the payload to .responseCart</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="1012" y="443.7832">updates .couponStatus,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="1012" y="459.0938">and sets .cacheStatus to 'valid'</text><polygon fill="#A80036" points="750.5,493.1465,740.5,497.1465,750.5,501.1465,746.5,497.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="744.5" x2="1130.5" y1="497.1465" y2="497.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="756.5" y="492.4043">responseCart, couponStatus, cacheStatus</text><path d="M670,510.1465 L670,581.1465 L804,581.1465 L804,520.1465 L794,510.1465 L670,510.1465 " fill="#FBFB77" filter="url(#f1kveo7lbhjnd1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M794,510.1465 L794,520.1465 L804,520.1465 L794,510.1465 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="676" y="527.7148">cacheStatus =&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="684" y="543.0254">isLoading</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="684" y="558.3359">loadingError</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="684" y="573.6465">isPendingUpdate</text><polygon fill="#A80036" points="924.5,592.3887,934.5,596.3887,924.5,600.3887,928.5,596.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="739.5" x2="930.5" y1="596.3887" y2="596.3887"/><path d="M904,609.3887 L904,634.3887 L965,634.3887 L965,619.3887 L955,609.3887 L904,609.3887 " fill="#FBFB77" filter="url(#f1kveo7lbhjnd1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M955,609.3887 L955,619.3887 L965,619.3887 L955,609.3887 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="910" y="626.957">render</text><!--
@startuml


skinparam ParticipantPadding 5
skinparam BoxPadding 5

box "" #f7dcc6
  participant WordPress.com
end box
box "Calypso" #f5e6b3
  participant Undocumented
end box
box "Composite Checkout" #b8e6bf
  participant useInitializeCartFromServer
  participant useShoppingCartManager
  participant CompositeCheckout
  participant useShoppingCartReducer
end box

Undocumented -> CompositeCheckout : import getCart
note over CompositeCheckout
	getCart from props
	or fall back to import
end note
CompositeCheckout -> useShoppingCartManager : cartKey, getCart
note over useShoppingCartManager : getCart bound to cartKey
useShoppingCartManager -> useInitializeCartFromServer : getCart
useInitializeCartFromServer -> Undocumented : << getCart >>
activate Undocumented
Undocumented -> WordPress.com : GET /me/shopping-cart/{cartKey}
activate WordPress.com
return
return
useInitializeCartFromServer -> useShoppingCartReducer : dispatch RECEIVE_INITIAL_RESPONSE_CART
note over useInitializeCartFromServer : event CART_INIT_COMPLETE
note over useShoppingCartReducer
  Moves the payload to .responseCart
  updates .couponStatus,
  and sets .cacheStatus to 'valid'
end note
useShoppingCartReducer -> useShoppingCartManager : responseCart, couponStatus, cacheStatus
note over useShoppingCartManager
  cacheStatus =>
    isLoading
    loadingError
    isPendingUpdate
end note
useShoppingCartManager -> CompositeCheckout
note over CompositeCheckout: render
@enduml

PlantUML version 1.2019.06(Fri May 24 12:10:25 CDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14+36-1461
Operating System: Mac OS X
OS Version: 10.15.7
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>